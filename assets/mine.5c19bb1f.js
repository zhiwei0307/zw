import"./vue.bba2ec4d.js";import{i as G,r as H,d as J}from"./index.87bcc442.js";import{_ as b}from"./index.57d03647.js";import{d as I,e as C,_ as n,$ as s,a2 as x,a3 as e,c as v,a1 as _,ac as u,af as F,ae as K,a0 as w,E as y,aa as A,ab as B,m as d,f as O,u as P,F as Q,a8 as W,ak as X}from"./@vue.ce69bcce.js";import"./ant-design-vue.4bd4cff1.js";import"./@babel.d77ec770.js";import"./regenerator-runtime.52b57d8c.js";import"./@ant-design.dce0d0de.js";import"./@ctrl.837ec117.js";import"./lodash-es.a7598bc1.js";import"./resize-observer-polyfill.8deb1e21.js";import"./dayjs.3e893def.js";import"./vue-types.6e6d84ba.js";import"./dom-align.243fa364.js";import"./async-validator.ed4c92a2.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.20dab116.js";import"./vuex.6a416a8d.js";import"./axios.e9656f83.js";import"./vue-router.b7fb3786.js";import"./nprogress.bfa0410b.js";import"./js-cookie.31874410.js";import"./clipboard.4ddab532.js";const D=t=>(A("data-v-62cd5895"),t=t(),B(),t),Y={class:"base-info"},tt={key:0,class:"price"},et=y(" \u5143"),at={class:"status"},ot={class:"fault-wrap"},st=D(()=>e("span",{class:"label"},"\u6545\u969C\u63CF\u8FF0\uFF1A",-1)),rt={class:"fault-wrap"},ut=D(()=>e("span",{class:"label"},"\u786E\u8BA4\u6545\u969C\uFF1A",-1)),nt={class:"fault-wrap"},it=D(()=>e("span",{class:"label"},"\u66F4\u6362\u914D\u4EF6\uFF1A",-1)),lt=I({props:["row"],setup(t){const g=C("context"),h=a=>{g.$router.push({path:"/machine/mine/detail",query:{id:a}})};function r(a){return a=a>0?a:0,[{color:"#909399",text:"\u5F85\u786E\u8BA4"},{color:"#909399",text:"\u540C\u610F"},{color:"red",text:"\u62D2\u7EDD"}][a]}function l(a){const i=[{color:"default",text:"\u7B49\u5F85\u7EF4\u4FEE"},{color:"success",text:"\u5DF2\u7EF4\u4FEE"},{color:"processing",text:"\u7EF4\u4FEE\u4E2D"},{color:"warning",text:"\u539F\u673A\u8FD4\u56DE"}];return a=a>0?a:0,i[a]}function f(a){return[{color:"default",text:"--"},{color:"success",text:"\u5DF2\u53D1\u8D27"},{color:"warning",text:"\u672A\u53D1\u8D27"}][a]}return(a,i)=>{const c=n("a-space"),p=n("a-tag");return s(),x("li",{class:"m-list__item",onClick:i[0]||(i[0]=k=>h(t.row.r_id))},[e("div",Y,[e("div",null,[v(c,null,{default:_(()=>[e("b",null,u(t.row.b_name),1),e("span",null,u(t.row.machine_id),1)]),_:1})]),t.row.r_price?(s(),x("span",tt,[e("span",null,u(t.row.r_price),1),et])):F("",!0)]),e("p",at,[v(c,null,{default:_(()=>[e("small",null,u(t.row.receipt_date.substring(0,11)),1),e("span",{style:K({color:r(t.row.is_repair).color})},u(r(t.row.is_repair).text),5),t.row.is_repair>0?(s(),w(p,{key:0,color:l(t.row.repair_status).color},{default:_(()=>[y(u(l(t.row.repair_status).text),1)]),_:1},8,["color"])):F("",!0),t.row.repair_status>0?(s(),w(p,{key:1,color:f(t.row.is_deliver).color},{default:_(()=>[y(u(f(t.row.is_deliver).text),1)]),_:1},8,["color"])):F("",!0)]),_:1})]),e("div",ot,[st,e("span",null,u(t.row.fault_desc||"-"),1)]),e("div",rt,[ut,e("span",null,u(t.row.r_o_fault||"-"),1)]),e("div",nt,[it,e("span",null,u(t.row.replace_part||"-"),1)])])}}});var ct=b(lt,[["__scopeId","data-v-62cd5895"]]);const dt=t=>(A("data-v-39d9ced2"),t=t(),B(),t),_t={style:{flex:"1",height:"100%"}},pt={class:"pc-show"},mt={class:"m-show"},vt={class:"search-wrap"},wt={key:1},Ft=dt(()=>e("small",null," \xA0\xA0\u52A0\u8F7D\u66F4\u591A... ",-1)),ht=I({setup(t){const g=C("context"),h=d(null),r=d(!0),l=d(""),f=d(1),a=d(10),i=O(()=>{const{id:o}=g.$store.getters.userinfo;return o}),c=d([]),p=d(!1),k=o=>{l.value&&(o.keywords=l.value)},S=o=>{r.value=!1;const m=o.data.rows;m.length<a.value?p.value=!1:p.value=!0,c.value.push(...m)},$=()=>{r.value=!0,h.value.requestList(++f.value)},L=()=>{r.value=!0,c.value=[],h.value.requestList(f.value=1)},R=[{title:"\u5E8F\u53F7",dataIndex:"index",width:49,align:"center",customRender:({index:o})=>o+1},{title:"\u65E5\u671F",dataIndex:"receipt_date",width:96,align:"center",customRender:z},{title:"\u578B\u53F7",dataIndex:"b_name",width:118,align:"center"},{title:"\u539F\u6545\u969C",dataIndex:"r_o_fault",ellipsis:!0,width:118},{title:"\u786E\u8BA4\u6545\u969C",ellipsis:!0,dataIndex:"fault_desc"},{title:"\u66F4\u6362\u914D\u4EF6",dataIndex:"replace_part",ellipsis:!0},{title:"\u662F\u5426\u7EF4\u4FEE",dataIndex:"is_repair",width:89,align:"center",customRender:G},{title:"\u7EF4\u4FEE\u72B6\u6001",dataIndex:"repair_status",width:89,align:"center",customRender:H},{title:"\u662F\u5426\u53D1\u8D27",dataIndex:"is_deliver",width:89,align:"center",customRender:J},{title:"\u673A\u5668\u7F16\u53F7",key:"machine_id",dataIndex:"machine_id",width:139,align:"center",ellipsis:!0}],q=(o,m)=>{g.$router.push({path:"/machine/mine/detail",query:{id:o.r_id}})};function z({text:o}){return o?o.substring(0,11):"--"}return(o,m)=>{const M=n("ListData"),N=n("a-spin"),V=n("a-input-search"),T=n("a-empty"),Z=n("loading-outlined"),j=n("a-button"),U=n("ZwScrollbar");return s(),x("div",_t,[v(U,{"wrap-class":"pd-17"},{default:_(()=>[e("div",pt,[v(M,{ref_key:"listdataRef",ref:h,"row-key":"r_id","page-size":a.value,columns:R,apis:{query:"rp/mine/"+P(i)},"modal-width":720,"top-tools":{hiddenAdd:!0},"before-listdata-load":k,onListdataLoaded:S,onCustomRowEvent:q},null,8,["page-size","apis"])]),e("div",mt,[r.value?(s(),w(N,{key:0,class:"loading-wrap",spinning:r.value},null,8,["spinning"])):F("",!0),e("div",vt,[v(V,{value:l.value,"onUpdate:value":m[0]||(m[0]=E=>l.value=E),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22","enter-button":"",onSearch:L},null,8,["value"])]),c.value.length>0?(s(),x("ul",wt,[(s(!0),x(Q,null,W(c.value,E=>(s(),w(ct,{key:E.r_id,row:E},null,8,["row"]))),128))])):r.value?F("",!0):(s(),w(T,{key:2})),p.value?(s(),w(j,{key:3,type:"text",onClick:$,block:""},X({default:_(()=>[Ft]),_:2},[r.value?{name:"icon",fn:_(()=>[v(Z)])}:void 0]),1024)):F("",!0)])]),_:1})])}}});var Ut=b(ht,[["__scopeId","data-v-39d9ced2"]]);export{Ut as default};
