import"./vue.f15e169e.js";import{i as e,r as a,d as t}from"./index.37fd2edc.js";import{_ as s}from"./index.8a912b13.js";import{d as l,k as r,_ as i,$ as o,a2 as n,a3 as d,m as u,a1 as c,ab as p,ae as v,ad as m,a0 as f,J as _,a9 as w,aa as b,v as x,l as g,u as h,F as j,a7 as y,aj as k}from"./@vue.454ad140.js";import"./ant-design-vue.de3a7dcd.js";import"./@babel.29daae83.js";import"./regenerator-runtime.6bfb484e.js";import"./@ant-design.0ba83ffb.js";import"./@ctrl.fa7cbd46.js";import"./lodash-es.a53432ff.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./dayjs.39b8ebe2.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash.3cabe671.js";import"./vuex.5db4980b.js";import"./axios.82d3905a.js";import"./vue-router.a66e1d8c.js";import"./nprogress.6eaf9b6f.js";import"./js-cookie.31874410.js";import"./clipboard.16092f5a.js";const I=e=>(w("data-v-62cd5895"),e=e(),b(),e),R={class:"base-info"},L={key:0,class:"price"},q=_(" 元"),z={class:"status"},$={class:"fault-wrap"},C=I((()=>d("span",{class:"label"},"故障描述：",-1))),S={class:"fault-wrap"},A=I((()=>d("span",{class:"label"},"确认故障：",-1))),D={class:"fault-wrap"},F=I((()=>d("span",{class:"label"},"更换配件：",-1)));var J=s(l({props:["row"],setup(e){const a=r("context");function t(e){return[{color:"#909399",text:"待确认"},{color:"#909399",text:"同意"},{color:"red",text:"拒绝"}][e=e>0?e:0]}function s(e){return[{color:"default",text:"等待维修"},{color:"success",text:"已维修"},{color:"processing",text:"维修中"},{color:"warning",text:"原机返回"}][e=e>0?e:0]}function l(e){return[{color:"default",text:"--"},{color:"success",text:"已发货"},{color:"warning",text:"未发货"}][e]}return(r,w)=>{const b=i("a-space"),x=i("a-tag");return o(),n("li",{class:"m-list__item",onClick:w[0]||(w[0]=t=>{return s=e.row.r_id,void a.$router.push({path:"/machine/mine/detail",query:{id:s}});var s})},[d("div",R,[d("div",null,[u(b,null,{default:c((()=>[d("b",null,p(e.row.b_name),1),d("span",null,p(e.row.machine_id),1)])),_:1})]),e.row.r_price?(o(),n("span",L,[d("span",null,p(e.row.r_price),1),q])):v("",!0)]),d("p",z,[u(b,null,{default:c((()=>[d("small",null,p(e.row.receipt_date.substring(0,11)),1),d("span",{style:m({color:t(e.row.is_repair).color})},p(t(e.row.is_repair).text),5),e.row.is_repair>0?(o(),f(x,{key:0,color:s(e.row.repair_status).color},{default:c((()=>[_(p(s(e.row.repair_status).text),1)])),_:1},8,["color"])):v("",!0),e.row.repair_status>0?(o(),f(x,{key:1,color:l(e.row.is_deliver).color},{default:c((()=>[_(p(l(e.row.is_deliver).text),1)])),_:1},8,["color"])):v("",!0)])),_:1})]),d("div",$,[C,d("span",null,p(e.row.fault_desc||"-"),1)]),d("div",S,[A,d("span",null,p(e.row.r_o_fault||"-"),1)]),d("div",D,[F,d("span",null,p(e.row.replace_part||"-"),1)])])}}}),[["__scopeId","data-v-62cd5895"]]);const U={style:{flex:"1",height:"100%"}},Z={class:"pc-show"},B={class:"m-show"},E={class:"search-wrap"},G=(e=>(w("data-v-1243aad3"),e=e(),b(),e))((()=>d("small",null,"   加载更多... ",-1)));var H=s(l({setup(s){const l=r("context"),p=x(null),m=x(!0),_=x(""),w=x(1),b=x(10),I=g((()=>{const{id:e}=l.$store.getters.userinfo;return e})),R=x([]),L=x(!1),q=e=>{_.value&&(e.keywords=_.value)},z=e=>{m.value=!1;const a=e.data.rows;a.length<b.value?L.value=!1:L.value=!0,R.value.push(...a),console.log("m listdaat: ",R)},$=()=>{m.value=!0,p.value.requestList(++w.value)},C=()=>{m.value=!0,R.value=[],p.value.requestList(w.value=1)},S=[{title:"序号",dataIndex:"index",width:49,align:"center",customRender:({index:e})=>e+1},{title:"日期",dataIndex:"receipt_date",width:96,align:"center",customRender:function({text:e}){if(!e)return"--";return e.substring(0,11)}},{title:"型号",dataIndex:"b_name",width:118,align:"center"},{title:"原故障",dataIndex:"r_o_fault",ellipsis:!0,width:118},{title:"确认故障",ellipsis:!0,dataIndex:"fault_desc"},{title:"更换配件",dataIndex:"replace_part",ellipsis:!0},{title:"是否维修",dataIndex:"is_repair",width:89,align:"center",customRender:e},{title:"维修状态",dataIndex:"repair_status",width:89,align:"center",customRender:a},{title:"是否发货",dataIndex:"is_deliver",width:89,align:"center",customRender:t},{title:"机器编号",key:"machine_id",dataIndex:"machine_id",width:139,align:"center",ellipsis:!0}];return(e,a)=>{const t=i("ListData"),s=i("a-spin"),l=i("a-input-search"),r=i("loading-outlined"),w=i("a-button"),x=i("ZwScrollbar");return o(),n("div",U,[u(x,{"wrap-class":"pd-17"},{default:c((()=>[d("div",Z,[u(t,{ref_key:"listdataRef",ref:p,"row-key":"r_id","page-size":b.value,columns:S,apis:{query:"rp/mine/"+h(I)},"modal-width":720,"top-tools":{hiddenAdd:!0},"before-listdata-load":q,onListdataLoaded:z},null,8,["page-size","apis"])]),d("div",B,[m.value?(o(),f(s,{key:0,class:"loading-wrap",spinning:m.value},null,8,["spinning"])):v("",!0),d("div",E,[u(l,{value:_.value,"onUpdate:value":a[0]||(a[0]=e=>_.value=e),placeholder:"请输入关键字搜索","enter-button":"",onSearch:C},null,8,["value"])]),d("ul",null,[(o(!0),n(j,null,y(R.value,(e=>(o(),f(J,{key:e.r_id,row:e},null,8,["row"])))),128))]),L.value?(o(),f(w,{key:1,type:"text",onClick:$,block:""},k({default:c((()=>[G])),_:2},[m.value?{name:"icon",fn:c((()=>[u(r)]))}:void 0]),1024)):v("",!0)])])),_:1})])}}}),[["__scopeId","data-v-1243aad3"]]);export{H as default};
