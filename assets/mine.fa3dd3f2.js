import"./vue.df901c44.js";import{i as e,r as a,d as t}from"./index.efa8beba.js";import{_ as s}from"./index.05df70b1.js";import{d as l,a0 as r,a1 as i,a4 as o,a5 as n,m as d,a3 as c,ad as u,ag as p,a2 as m,J as f,ab as _,ac as w,k as v,v as b,l as x,u as g,F as j,a9 as h,al as y}from"./@vue.889a75b5.js";import{y as k}from"./ant-design-vue.a6735399.js";import"./dayjs.39b8ebe2.js";import"./@ant-design.2d3b2fbb.js";import"./@ctrl.fa7cbd46.js";import"./lodash.3cabe671.js";import"./vuex.7d8a0789.js";import"./axios.82d3905a.js";import"./vue-router.8ca1e268.js";import"./nprogress.6eaf9b6f.js";import"./js-cookie.31874410.js";import"./resize-observer-polyfill.8deb1e21.js";import"./clipboard.16092f5a.js";import"./@babel.29daae83.js";import"./regenerator-runtime.6bfb484e.js";import"./lodash-es.a53432ff.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";const I=e=>(_("data-v-3a38c2ee"),e=e(),w(),e),R={class:"m-list__item"},L={class:"base-info"},z={key:0,class:"price"},q=f(" 元"),C={class:"status"},A={class:"fault-wrap"},B=I((()=>n("span",{class:"label"},"故障描述：",-1))),D={class:"fault-wrap"},E=I((()=>n("span",{class:"label"},"确认故障：",-1))),F={class:"fault-wrap"},J=I((()=>n("span",{class:"label"},"更换配件：",-1)));var N=s(l({props:["row"],setup(e){function a(e){return[{color:"default",text:"待确认"},{color:"success",text:"同意"},{color:"error",text:"拒绝"}][e=e>0?e:0]}function t(e){return[{color:"default",text:"等待维修"},{color:"success",text:"已维修"},{color:"processing",text:"维修中"},{color:"warning",text:"原机返回"}][e=e>0?e:0]}function s(e){return[{color:"default",text:"--"},{color:"success",text:"已发货"},{color:"warning",text:"未发货"}][e]}return(l,f)=>{const _=r("a-space"),w=r("a-tag");return i(),o("li",R,[n("p",L,[n("div",null,[d(_,null,{default:c((()=>[n("b",null,u(e.row.b_name),1),n("span",null,u(e.row.machine_id),1),n("span",null,u(e.row.receipt_date.substring(0,11)),1)])),_:1})]),e.row.r_price?(i(),o("span",z,[n("span",null,u(e.row.r_price),1),q])):p("",!0)]),n("p",C,[d(_,null,{default:c((()=>[d(w,{color:a(e.row.is_repair).color},{default:c((()=>[n("small",null,u(a(e.row.is_repair).text),1)])),_:1},8,["color"]),e.row.is_repair>0?(i(),m(w,{key:0,color:t(e.row.repair_status).color},{default:c((()=>[n("small",null,u(t(e.row.repair_status).text),1)])),_:1},8,["color"])):p("",!0),e.row.repair_status>0?(i(),m(w,{key:1,color:s(e.row.is_deliver).color},{default:c((()=>[n("small",null,u(s(e.row.is_deliver).text),1)])),_:1},8,["color"])):p("",!0)])),_:1})]),n("div",A,[B,n("span",null,u(e.row.fault_desc||"-"),1)]),n("div",D,[E,n("span",null,u(e.row.r_o_fault||"-"),1)]),n("div",F,[J,n("span",null,u(e.row.replace_part||"-"),1)])])}}}),[["__scopeId","data-v-3a38c2ee"]]);const S={style:{flex:"1",height:"100%"}},Z={class:"pc-show"},$={class:"m-show"},G=(e=>(_("data-v-30347590"),e=e(),w(),e))((()=>n("small",null,"   加载更多... ",-1)));var H=s(l({setup(s){const l=v("context"),u=b(null),f=b(!0),_=b(1),w=b(10),I=x((()=>{const{id:e}=l.$store.getters.userinfo;return e})),R=b([]),L=b(!1),z=e=>{f.value=!1;const a=e.data.rows;a.length<w.value?L.value=!1:L.value=!0,R.value.push(...a),console.log("m listdaat: ",R)},q=()=>{f.value=!0,u.value.requestList(_.value++)},C=()=>document.getElementsByClassName("el-scrollbar__wrap")[0],A=[{title:"序号",dataIndex:"index",width:49,align:"center",customRender:({index:e})=>e+1},{title:"日期",dataIndex:"receipt_date",width:96,align:"center",customRender:function({text:e}){if(!e)return"--";return e.substring(0,11)}},{title:"型号",dataIndex:"b_name",width:118,align:"center"},{title:"原故障",dataIndex:"r_o_fault",ellipsis:!0,width:118},{title:"确认故障",ellipsis:!0,dataIndex:"fault_desc"},{title:"更换配件",dataIndex:"replace_part",ellipsis:!0},{title:"是否维修",dataIndex:"is_repair",width:89,align:"center",customRender:e},{title:"维修状态",dataIndex:"repair_status",width:89,align:"center",customRender:a},{title:"是否发货",dataIndex:"is_deliver",width:89,align:"center",customRender:t},{title:"机器编号",key:"machine_id",dataIndex:"machine_id",width:139,align:"center",ellipsis:!0}];return(e,a)=>{const t=r("ListData"),s=r("a-spin"),l=r("loading-outlined"),_=r("a-button"),v=r("ZwScrollbar");return i(),o("div",S,[d(v,{"wrap-class":"pd-17"},{default:c((()=>[n("div",Z,[d(t,{ref_key:"listdataRef",ref:u,"row-key":"r_id","page-size":w.value,columns:A,apis:{query:"repair/mine/"+g(I)},"modal-width":720,"top-tools":{hiddenAdd:!0},onListdataLoaded:z},null,8,["page-size","apis"])]),n("div",$,[f.value?(i(),m(s,{key:0,class:"loading-wrap",spinning:f.value},null,8,["spinning"])):p("",!0),n("ul",null,[(i(!0),o(j,null,h(R.value,(e=>(i(),m(N,{key:e.r_id,row:e},null,8,["row"])))),128))]),L.value?(i(),m(_,{key:1,type:"text",onClick:q,block:""},y({default:c((()=>[G])),_:2},[f.value?{name:"icon",fn:c((()=>[d(l)]))}:void 0]),1024)):p("",!0),d(g(k),{target:C})])])),_:1})])}}}),[["__scopeId","data-v-30347590"]]);export{H as default};
