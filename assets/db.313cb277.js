import"./vue.3c1b29c4.js";import{g as e}from"./index.b0c776a2.js";import{d as t,k as o,v as a,_ as s,$ as i,a0 as r,a1 as d,m as n,a3 as l}from"./@vue.61fb48b5.js";import{Q as c}from"./@ant-design.2f8223f0.js";import"./ant-design-vue.2d339fb3.js";import"./@babel.eda524f0.js";import"./regenerator-runtime.7769f52d.js";import"./lodash-es.a53432ff.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./dayjs.39b8ebe2.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash.5f175b98.js";import"./vuex.fb8d35f6.js";import"./axios.82d3905a.js";import"./vue-router.9a97da5e.js";import"./nprogress.6eaf9b6f.js";import"./js-cookie.31874410.js";import"./clipboard.5999f2a2.js";import"./@ctrl.fa7cbd46.js";const p=l("span",null,null,-1),m=t({setup(t){const l=o("context"),m=a(""),b=a({}),f=e=>{m.value=e.data.bt_panel,b.value=e.data.signature},u=[{title:"序号",dataIndex:"index",width:48,align:"center",customRender:({index:e})=>e+1},{title:"文件名称",dataIndex:"name",width:430,customCell:(e,t,o)=>({class:"ant-table-row-cell-ellipsis ant-table-row-cell-break-word click-cursor",onClick:t=>{var o,a;t.stopPropagation(),o=e.filename,a=e.name,l.$modal.confirm({title:"提示",icon:n(c),okText:"确认",cancelText:"取消",content:n("div",null,["确定将文件",n("i",{style:"color: orange; padding-left: 4px;"},a),n("br"),"下载到本机电脑么？"]),onOk:()=>new Promise(((e,s)=>{l.$http.post("db/download",{filename:o,name:a},{responseType:"blob"}).then((o=>{try{const t=window.URL.createObjectURL(new Blob([o],{type:"application/x-gzip"}));var i=document.createElement("a");i.style.display="none",i.download=a,i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t),e("success")}catch(t){s(t)}})).catch((e=>{console.log("download err:",e)}))})),onCancel(){}})}})},{title:"文件大小",dataIndex:"size",width:106,customRender:({text:t})=>e(t)},{title:"备份时间",dataIndex:"addtime",width:150,align:"center"},{title:"备注信息",dataIndex:"ps",width:150}];return(e,t)=>{const o=s("ListData"),a=s("ZwScrollbar");return i(),r(a,{"wrap-class":"pd-17"},{default:d((()=>[n(o,{"row-key":"id",columns:u,apis:{query:"db/list"},onListdataLoaded:f},{topTools:d((()=>[p])),_:1})])),_:1})}}});export{m as default};
