import"./vue.f15e169e.js";import{g as e}from"./index.1844482b.js";import{d as t,k as a,v as o,_ as s,$ as i,a0 as r,a1 as d,m as n,a3 as l}from"./@vue.454ad140.js";import{Q as c}from"./@ant-design.0ba83ffb.js";import"./ant-design-vue.de3a7dcd.js";import"./@babel.29daae83.js";import"./regenerator-runtime.6bfb484e.js";import"./lodash-es.a53432ff.js";import"./resize-observer-polyfill.8deb1e21.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.c68eec67.js";import"./compute-scroll-into-view.6058b3be.js";import"./dayjs.39b8ebe2.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash.3cabe671.js";import"./vuex.5db4980b.js";import"./axios.82d3905a.js";import"./vue-router.a66e1d8c.js";import"./nprogress.6eaf9b6f.js";import"./js-cookie.31874410.js";import"./clipboard.16092f5a.js";import"./@ctrl.fa7cbd46.js";const p=l("span",null,null,-1),m=t({setup(t){const l=a("context"),m=o(""),b=o({}),u=e=>{m.value=e.data.bt_panel,b.value=e.data.signature},j=[{title:"序号",dataIndex:"index",width:48,align:"center",customRender:({index:e})=>e+1},{title:"文件名称",dataIndex:"name",width:430,customCell:(e,t,a)=>({class:"ant-table-row-cell-ellipsis ant-table-row-cell-break-word click-cursor",onClick:t=>{var a,o;t.stopPropagation(),a=e.filename,o=e.name,l.$modal.confirm({title:"提示",icon:n(c),okText:"确认",cancelText:"取消",content:n("div",null,["确定将文件",n("i",{style:"color: orange; padding-left: 4px;"},o),n("br"),"下载到本机电脑么？"]),onOk:()=>new Promise(((e,s)=>{l.$http.post("db/download",{filename:a,name:o},{responseType:"blob"}).then((a=>{try{const t=window.URL.createObjectURL(new Blob([a],{type:"application/x-gzip"}));var i=document.createElement("a");i.style.display="none",i.download=o,i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t),e("success")}catch(t){s(t)}})).catch((e=>{console.log("download err:",e)}))})),onCancel(){}})}})},{title:"文件大小",dataIndex:"size",width:106,customRender:({text:t})=>e(t)},{title:"备份时间",dataIndex:"addtime",width:150,align:"center"},{title:"备注信息",dataIndex:"ps",width:150}];return(e,t)=>{const a=s("ListData"),o=s("ZwScrollbar");return i(),r(o,{"wrap-class":"pd-17"},{default:d((()=>[n(a,{"row-key":"id",columns:j,apis:{query:"db/list"},onListdataLoaded:u},{topTools:d((()=>[p])),_:1})])),_:1})}}});export{m as default};
